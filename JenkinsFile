pipeline{
    //agent any
    agent{
    label ('nodes')
    }
    triggers{
        pollSCM('* * * * *')
    }
    options{
        timestamps()
        buildDiscarder(logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '6', numToKeepStr: '7'))
    }
    tools{
       maven  "maven3.6.3"
    }
    stages{ 
    stage('Checkoutcode'){
        steps{
	    git branch: 'development', credentialsId: '6040bc88-2344-459e-b795-b4945bb0090f', url: 'https://github.com/gsdevopscloud/maven-web-application.git'
        }
    }
     stage ('Build'){
     steps{
      sh "mvn  package"
     }
	}
	 stage ('ExcuteSonarQubeReport'){
	 steps{
	 sh "mvn clean sonar:sonar"
   	 }
	}
     
    }//stage closing
    post{
        success{
            emailext body: '''BUILD IS OVER -success
           Thanks,
           Krishna.''', subject: 'BUILD IS OVER', to: 'krishnakrishh0@gmail.com'
        }
        failure{
            emailext body: '''BUILD IS OVER -failed
           Thanks,
           Krishna.''', subject: 'BUILD IS OVER', to: 'krishnakrishh0@gmail.com'
        }
      }
    }
